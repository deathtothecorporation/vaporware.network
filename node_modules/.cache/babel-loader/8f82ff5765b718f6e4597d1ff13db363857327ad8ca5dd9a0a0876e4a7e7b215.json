{"ast":null,"code":"import { computed, ref, watch } from \"vue\";\nexport default {\n  __name: 'SignUp',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const signupEntry = ref(\"\");\n    const thanks = ref(false);\n    const error = ref(false);\n    const loading = ref(false);\n    const waitlistForm = ref(null);\n    watch(thanks, val => {\n      if (val) {\n        window.setTimeout(() => {\n          thanks.value = false;\n        }, 3500);\n      }\n    });\n    watch(error, val => {\n      if (val) {\n        window.setTimeout(() => {\n          error.value = false;\n        }, 5000);\n      }\n    });\n    const invalid = computed(() => {\n      var patpee = new RegExp(/^~[a-z-]*$/);\n      var email = new RegExp(/^.*@.*\\..*$/);\n      const response = responseString.value;\n      if (!patpee.test(response) && !email.test(response)) {\n        return true;\n      }\n      return false;\n    });\n    const responseString = computed(() => {\n      return signupEntry.value.toString();\n    });\n    const submitForm = () => {\n      loading.value = true;\n      if (invalid.value) {\n        return;\n      }\n      let formData = new FormData();\n      formData.append(\"entry.1987957812\", responseString.value);\n      const url = \"https://docs.google.com/forms/u/3/d/e/1FAIpQLSfBDo4OJQ3iJrMqTcWrcg6m_qqP09Hni9w-44dirgOUri3pxA/formResponse\";\n      fetch(url, {\n        method: \"POST\",\n        mode: \"no-cors\",\n        body: formData\n      }).then(r => {\n        console.log(\"done \", r);\n        signupEntry.value = \"\";\n        thanks.value = true;\n      }).catch(e => {\n        console.log(\"bad \", {\n          e\n        });\n        error.value = true;\n      }).finally(() => {\n        loading.value = false;\n      });\n    };\n    const __returned__ = {\n      signupEntry,\n      thanks,\n      error,\n      loading,\n      waitlistForm,\n      invalid,\n      responseString,\n      submitForm,\n      computed,\n      ref,\n      watch\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","ref","watch","signupEntry","thanks","error","loading","waitlistForm","val","window","setTimeout","value","invalid","patpee","RegExp","email","response","responseString","test","toString","submitForm","formData","FormData","append","url","fetch","method","mode","body","then","r","console","log","catch","e","finally"],"sources":["/home/vcavallo/code/vapor/vaporware.network/src/components/SignUp.vue"],"sourcesContent":["<template>\n  <div class=\"\">\n    <form ref=\"waitlistForm\" @submit.prevent=\"submitForm\">\n      <div class=\"flex flex-col\">\n        <input\n          type=\"text\"\n          placeholder=\"Enter your email or Urbit ID\"\n          v-model=\"signupEntry\"\n          name=\"entry.1987957812\"\n          @keydown=\"\n            thanks = false;\n            error = false;\n          \"\n          @keyup.enter=\"submitForm\"\n          class=\"w-full py-8 font-mono text-center rounded-lg shadow-sm md:px-16 md:text-xl text-dark-gray\"\n          :class=\"signupEntry !== '' && invalid ? 'ring ring-red-300' : ''\"\n        />\n\n        <div class=\"mx-auto mt-2 font-bold text-center\">\n          <div\n            class=\"text-light-gray\"\n            :class=\"signupEntry !== '' && invalid ? 'visible' : 'invisible'\"\n          >\n            Please enter a valid email or @p\n          </div>\n\n          <div class=\"\" v-if=\"thanks\">Thanks, you're on the waitlist!</div>\n\n          <div class=\"\" v-if=\"error\">Something went wrong...</div>\n        </div>\n\n        <div class=\"w-auto mx-auto mt-4\">\n          <input\n            :class=\"\n              invalid || loading\n                ? 'opacity-50'\n                : 'cursor-pointer hover:shadow-sm hover:opacity-80'\n            \"\n            class=\"w-full py-4 text-lg text-center text-white border rounded-lg shadow-md bg-[#040C53]\"\n            @click=\"submitForm\"\n            :disabled=\"invalid || loading\"\n            :value=\"loading ? 'Sending...' : 'Notify me'\"\n          />\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script setup>\nimport { computed, ref, watch } from \"vue\";\n\nconst signupEntry = ref(\"\");\nconst thanks = ref(false);\nconst error = ref(false);\nconst loading = ref(false);\nconst waitlistForm = ref(null);\n\nwatch(thanks, (val) => {\n  if (val) {\n    window.setTimeout(() => {\n      thanks.value = false;\n    }, 3500);\n  }\n});\n\nwatch(error, (val) => {\n  if (val) {\n    window.setTimeout(() => {\n      error.value = false;\n    }, 5000);\n  }\n});\n\nconst invalid = computed(() => {\n  var patpee = new RegExp(/^~[a-z-]*$/);\n  var email = new RegExp(/^.*@.*\\..*$/);\n\n  const response = responseString.value;\n\n  if (!patpee.test(response) && !email.test(response)) {\n    return true;\n  }\n  return false;\n});\n\nconst responseString = computed(() => {\n  return signupEntry.value.toString();\n});\n\nconst submitForm = () => {\n  loading.value = true;\n\n  if (invalid.value) {\n    return;\n  }\n\n  let formData = new FormData();\n  formData.append(\"entry.1987957812\", responseString.value);\n\n  const url =\n    \"https://docs.google.com/forms/u/3/d/e/1FAIpQLSfBDo4OJQ3iJrMqTcWrcg6m_qqP09Hni9w-44dirgOUri3pxA/formResponse\";\n\n  fetch(url, {\n    method: \"POST\",\n    mode: \"no-cors\",\n    body: formData,\n  })\n    .then((r) => {\n      console.log(\"done \", r);\n      signupEntry.value = \"\";\n      thanks.value = true;\n    })\n    .catch((e) => {\n      console.log(\"bad \", { e });\n      error.value = true;\n    })\n    .finally(() => {\n      loading.value = false;\n    });\n};\n</script>\n\n<style scoped>\n/* code... */\n</style>\n"],"mappings":"AAkDA,SAASA,QAAQ,EAAEC,GAAG,EAAEC,KAAK,QAAQ,KAAK;;;;;;;IAE1C,MAAMC,WAAW,GAAGF,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMG,MAAM,GAAGH,GAAG,CAAC,KAAK,CAAC;IACzB,MAAMI,KAAK,GAAGJ,GAAG,CAAC,KAAK,CAAC;IACxB,MAAMK,OAAO,GAAGL,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMM,YAAY,GAAGN,GAAG,CAAC,IAAI,CAAC;IAE9BC,KAAK,CAACE,MAAM,EAAGI,GAAG,IAAK;MACrB,IAAIA,GAAG,EAAE;QACPC,MAAM,CAACC,UAAU,CAAC,MAAM;UACtBN,MAAM,CAACO,KAAK,GAAG,KAAK;QACtB,CAAC,EAAE,IAAI,CAAC;MACV;IACF,CAAC,CAAC;IAEFT,KAAK,CAACG,KAAK,EAAGG,GAAG,IAAK;MACpB,IAAIA,GAAG,EAAE;QACPC,MAAM,CAACC,UAAU,CAAC,MAAM;UACtBL,KAAK,CAACM,KAAK,GAAG,KAAK;QACrB,CAAC,EAAE,IAAI,CAAC;MACV;IACF,CAAC,CAAC;IAEF,MAAMC,OAAO,GAAGZ,QAAQ,CAAC,MAAM;MAC7B,IAAIa,MAAM,GAAG,IAAIC,MAAM,CAAC,YAAY,CAAC;MACrC,IAAIC,KAAK,GAAG,IAAID,MAAM,CAAC,aAAa,CAAC;MAErC,MAAME,QAAQ,GAAGC,cAAc,CAACN,KAAK;MAErC,IAAI,CAACE,MAAM,CAACK,IAAI,CAACF,QAAQ,CAAC,IAAI,CAACD,KAAK,CAACG,IAAI,CAACF,QAAQ,CAAC,EAAE;QACnD,OAAO,IAAI;MACb;MACA,OAAO,KAAK;IACd,CAAC,CAAC;IAEF,MAAMC,cAAc,GAAGjB,QAAQ,CAAC,MAAM;MACpC,OAAOG,WAAW,CAACQ,KAAK,CAACQ,QAAQ,EAAE;IACrC,CAAC,CAAC;IAEF,MAAMC,UAAU,GAAGA,CAAA,KAAM;MACvBd,OAAO,CAACK,KAAK,GAAG,IAAI;MAEpB,IAAIC,OAAO,CAACD,KAAK,EAAE;QACjB;MACF;MAEA,IAAIU,QAAQ,GAAG,IAAIC,QAAQ,EAAE;MAC7BD,QAAQ,CAACE,MAAM,CAAC,kBAAkB,EAAEN,cAAc,CAACN,KAAK,CAAC;MAEzD,MAAMa,GAAG,GACP,6GAA6G;MAE/GC,KAAK,CAACD,GAAG,EAAE;QACTE,MAAM,EAAE,MAAM;QACdC,IAAI,EAAE,SAAS;QACfC,IAAI,EAAEP;MACR,CAAC,CAAC,CACCQ,IAAI,CAAEC,CAAC,IAAK;QACXC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,CAAC,CAAC;QACvB3B,WAAW,CAACQ,KAAK,GAAG,EAAE;QACtBP,MAAM,CAACO,KAAK,GAAG,IAAI;MACrB,CAAC,CAAC,CACDsB,KAAK,CAAEC,CAAC,IAAK;QACZH,OAAO,CAACC,GAAG,CAAC,MAAM,EAAE;UAAEE;QAAE,CAAC,CAAC;QAC1B7B,KAAK,CAACM,KAAK,GAAG,IAAI;MACpB,CAAC,CAAC,CACDwB,OAAO,CAAC,MAAM;QACb7B,OAAO,CAACK,KAAK,GAAG,KAAK;MACvB,CAAC,CAAC;IACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}