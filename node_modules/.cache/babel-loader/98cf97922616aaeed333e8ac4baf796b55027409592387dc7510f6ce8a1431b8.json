{"ast":null,"code":"import { vModelText as _vModelText, withKeys as _withKeys, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-d21a9130\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"\"\n};\nconst _hoisted_2 = [\"onSubmit\"];\nconst _hoisted_3 = {\n  class: \"flex flex-col\"\n};\nconst _hoisted_4 = [\"onKeyup\"];\nconst _hoisted_5 = {\n  class: \"mx-auto mt-2 font-bold text-center\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  class: \"\"\n};\nconst _hoisted_8 = {\n  class: \"w-auto mx-auto mt-4\"\n};\nconst _hoisted_9 = [\"disabled\", \"value\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"form\", {\n    ref: \"waitlistForm\",\n    onSubmit: _withModifiers($setup.submitForm, [\"prevent\"])\n  }, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter your email or Urbit ID\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.signupEntry = $event),\n    name: \"entry.1987957812\",\n    onKeydown: _cache[1] || (_cache[1] = $event => {\n      $setup.thanks = false;\n      $setup.error = false;\n    }),\n    onKeyup: _withKeys($setup.submitForm, [\"enter\"]),\n    class: _normalizeClass([\"w-full py-8 font-mono text-center rounded-lg shadow-sm md:px-16 md:text-xl text-dark-gray\", $setup.signupEntry !== '' && $setup.invalid ? 'ring ring-red-300' : ''])\n  }, null, 42 /* CLASS, PROPS, HYDRATE_EVENTS */, _hoisted_4), [[_vModelText, $setup.signupEntry]]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"text-light-gray\", $setup.signupEntry !== '' && $setup.invalid ? 'visible' : 'invisible'])\n  }, \" Please enter a valid email or @p \", 2 /* CLASS */), $setup.thanks ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \"Thanks, you're on the waitlist!\")) : _createCommentVNode(\"v-if\", true), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \"Something went wrong...\")) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"input\", {\n    class: _normalizeClass([$setup.invalid || $setup.loading ? 'opacity-50' : 'cursor-pointer hover:shadow-sm hover:opacity-80', \"w-full py-4 text-lg text-center text-white border rounded-lg shadow-md bg-[#040C53]\"]),\n    onClick: $setup.submitForm,\n    disabled: $setup.invalid || $setup.loading,\n    value: $setup.loading ? 'Sending...' : 'Notify me'\n  }, null, 10 /* CLASS, PROPS */, _hoisted_9)])])], 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_2)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","ref","onSubmit","_withModifiers","$setup","submitForm","_hoisted_3","type","placeholder","signupEntry","$event","name","onKeydown","_cache","thanks","error","onKeyup","_withKeys","_normalizeClass","invalid","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","loading","onClick","disabled","value"],"sources":["/home/vcavallo/code/vapor/vaporware.network/src/components/SignUp.vue"],"sourcesContent":["<template>\n  <div class=\"\">\n    <form ref=\"waitlistForm\" @submit.prevent=\"submitForm\">\n      <div class=\"flex flex-col\">\n        <input\n          type=\"text\"\n          placeholder=\"Enter your email or Urbit ID\"\n          v-model=\"signupEntry\"\n          name=\"entry.1987957812\"\n          @keydown=\"\n            thanks = false;\n            error = false;\n          \"\n          @keyup.enter=\"submitForm\"\n          class=\"w-full py-8 font-mono text-center rounded-lg shadow-sm md:px-16 md:text-xl text-dark-gray\"\n          :class=\"signupEntry !== '' && invalid ? 'ring ring-red-300' : ''\"\n        />\n\n        <div class=\"mx-auto mt-2 font-bold text-center\">\n          <div\n            class=\"text-light-gray\"\n            :class=\"signupEntry !== '' && invalid ? 'visible' : 'invisible'\"\n          >\n            Please enter a valid email or @p\n          </div>\n\n          <div class=\"\" v-if=\"thanks\">Thanks, you're on the waitlist!</div>\n\n          <div class=\"\" v-if=\"error\">Something went wrong...</div>\n        </div>\n\n        <div class=\"w-auto mx-auto mt-4\">\n          <input\n            :class=\"\n              invalid || loading\n                ? 'opacity-50'\n                : 'cursor-pointer hover:shadow-sm hover:opacity-80'\n            \"\n            class=\"w-full py-4 text-lg text-center text-white border rounded-lg shadow-md bg-[#040C53]\"\n            @click=\"submitForm\"\n            :disabled=\"invalid || loading\"\n            :value=\"loading ? 'Sending...' : 'Notify me'\"\n          />\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script setup>\nimport { computed, ref, watch } from \"vue\";\n\nconst signupEntry = ref(\"\");\nconst thanks = ref(false);\nconst error = ref(false);\nconst loading = ref(false);\nconst waitlistForm = ref(null);\n\nwatch(thanks, (val) => {\n  if (val) {\n    window.setTimeout(() => {\n      thanks.value = false;\n    }, 3500);\n  }\n});\n\nwatch(error, (val) => {\n  if (val) {\n    window.setTimeout(() => {\n      error.value = false;\n    }, 5000);\n  }\n});\n\nconst invalid = computed(() => {\n  var patpee = new RegExp(/^~[a-z-]*$/);\n  var email = new RegExp(/^.*@.*\\..*$/);\n\n  const response = responseString.value;\n\n  if (!patpee.test(response) && !email.test(response)) {\n    return true;\n  }\n  return false;\n});\n\nconst responseString = computed(() => {\n  return signupEntry.value.toString();\n});\n\nconst submitForm = () => {\n  loading.value = true;\n\n  if (invalid.value) {\n    return;\n  }\n\n  let formData = new FormData();\n  formData.append(\"entry.1987957812\", responseString.value);\n\n  const url =\n    \"https://docs.google.com/forms/u/3/d/e/1FAIpQLSfBDo4OJQ3iJrMqTcWrcg6m_qqP09Hni9w-44dirgOUri3pxA/formResponse\";\n\n  fetch(url, {\n    method: \"POST\",\n    mode: \"no-cors\",\n    body: formData,\n  })\n    .then((r) => {\n      console.log(\"done \", r);\n      signupEntry.value = \"\";\n      thanks.value = true;\n    })\n    .catch((e) => {\n      console.log(\"bad \", { e });\n      error.value = true;\n    })\n    .finally(() => {\n      loading.value = false;\n    });\n};\n</script>\n\n<style scoped>\n/* code... */\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAE;;;EAEJA,KAAK,EAAC;AAAe;;;EAenBA,KAAK,EAAC;AAAoC;;;EAQxCA,KAAK,EAAC;;;;EAENA,KAAK,EAAC;;;EAGRA,KAAK,EAAC;AAAqB;;;uBA9BtCC,mBAAA,CA6CM,OA7CNC,UA6CM,GA5CJC,mBAAA,CA2CO;IA3CDC,GAAG,EAAC,cAAc;IAAEC,QAAM,EAAAC,cAAA,CAAUC,MAAA,CAAAC,UAAU;MAClDL,mBAAA,CAyCM,OAzCNM,UAyCM,G,gBAxCJN,mBAAA,CAYE;IAXAO,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,8BAA8B;+DACjCJ,MAAA,CAAAK,WAAW,GAAAC,MAAA;IACpBC,IAAI,EAAC,kBAAkB;IACtBC,SAAO,EAAAC,MAAA,QAAAA,MAAA,MAAAH,MAAA;MAAeN,MAAA,CAAAU,MAAM;MAAsBV,MAAA,CAAAW,KAAK;;IAIvDC,OAAK,EAAAC,SAAA,CAAQb,MAAA,CAAAC,UAAU;IACxBR,KAAK,EAAAqB,eAAA,EAAC,2FAA2F,EACzFd,MAAA,CAAAK,WAAW,WAAWL,MAAA,CAAAe,OAAO;8EAR5Bf,MAAA,CAAAK,WAAW,E,GAWtBT,mBAAA,CAWM,OAXNoB,UAWM,GAVJpB,mBAAA,CAKM;IAJJH,KAAK,EAAAqB,eAAA,EAAC,iBAAiB,EACfd,MAAA,CAAAK,WAAW,WAAWL,MAAA,CAAAe,OAAO;KACtC,oCAED,kBAEoBf,MAAA,CAAAU,MAAM,I,cAA1BhB,mBAAA,CAAiE,OAAjEuB,UAAiE,EAArC,iCAA+B,K,mCAEvCjB,MAAA,CAAAW,KAAK,I,cAAzBjB,mBAAA,CAAwD,OAAxDwB,UAAwD,EAA7B,yBAAuB,K,qCAGpDtB,mBAAA,CAYM,OAZNuB,UAYM,GAXJvB,mBAAA,CAUE;IATCH,KAAK,EAAAqB,eAAA,EAAiBd,MAAA,CAAAe,OAAO,IAAIf,MAAA,CAAAoB,OAAO,G,kEAKnC,qFAAqF;IAC1FC,OAAK,EAAErB,MAAA,CAAAC,UAAU;IACjBqB,QAAQ,EAAEtB,MAAA,CAAAe,OAAO,IAAIf,MAAA,CAAAoB,OAAO;IAC5BG,KAAK,EAAEvB,MAAA,CAAAoB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}